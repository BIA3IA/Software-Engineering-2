% --------------------------------------------------------------------------
% Introduction % 
% --------------------------------------------------------------------------
In recent years, cycling has become an increasingly popular and sustainable means of transportation. However, cyclists often struggle to find safe routes and reliable information about bike path conditions.
The \textbf{Best Bike Paths (BBP)} system aims to address this issue by offering a platform where users can record their rides, explore optimal routes, and contribute with updated information about cycling paths and obstacles.

% --------------------------------------------------------------------------
% Purpose % 
% --------------------------------------------------------------------------
\section{Purpose}
\label{sec:purpose}

The purpose of this document is to define, analyze, and specify the requirements of the \textbf{Best Bike Paths (BBP)} system in a precise and complete manner.
It establishes a shared understanding of the system's goals, requirements, and boundaries, describing both the functional behavior and the assumptions about the real-world environment in which the system operates.
This document serves as a common reference for all project stakeholders, ensuring a clear and shared understanding of what the system must accomplish and under which constraints.

\subsection{Goals}
\label{subsec:goals}

The following \textbf{goals} outline the desired properties of the real world that the Best Bike Paths (BBP) system is intended to achieve.
They reflect the stakeholders' expectations about how cycling activities and information should be managed and shared, independently of any technical or implementation detail.

\begin{itemize}
	\item[\textbf{[G1]}] \textbf{Users can access accurate and up-to-date information about bike paths}, including their status and possible obstacles, to support safe and informed cycling.
	\item[\textbf{[G2]}] \textbf{Users can discover optimal and safe biking routes} between two locations based on the quality and effectiveness of available bike paths.
	\item[\textbf{[G3]}] \textbf{Users can safely navigate along selected bike paths}, being informed in real time about their position, nearby obstacles, and possible path closures.
	\item[\textbf{[G4]}] \textbf{Logged-in users can track their cycling activities over time}, monitoring their trips and reviewing their past performances.
	\item[\textbf{[G5]}] \textbf{Logged-in users can contribute to the community knowledge} by creating new bike paths and by submitting or confirming reports about existing ones.
	\item[\textbf{[G6]}] \textbf{Logged-in users can view general and per-trip statistics} derived from their recorded cycling activities, supporting awareness and motivation in their performances.
\end{itemize}

% --------------------------------------------------------------------------
% Scope % 
% --------------------------------------------------------------------------

\section{Scope}
\label{sec:scope}

\textbf{Best Bike Paths (BBP)} is a software system designed to support users in \textbf{creating}, \textbf{exploring}, and
\textbf{sharing} information about bike paths and cycling activities.

Users can \textbf{register} on the platform to enable personalized statistics for their cycling activities.
Logged-in users have access to a personal history of their trips and can view general \textbf{statistics} accumulated over time,
as well as detailed \textbf{information} about each specific \textbf{trip}, such as total distance, duration, average speed,
and other performance metrics.
When available, \textbf{additional information} such as weather conditions, temperature, and wind speed can be \textbf{retrieved}
from \textbf{external meteorological services} and included in the trip summary.

BBP can \textbf{detect when a user is biking} based on their speed and GPS movement.
If the app is open and such activity is detected, the system may prompt the user to start recording a trip.

While following a path, the user can visualize their current position on the map. Additionally, the system may provide
\textbf{pop-up alerts} about nearby obstacles or particular conditions along the path, that the user can confirm or dismiss.

BBP supports both manual reports and automatically detected anomaly reports during an active trip.
\textbf{manual reporting} is always available: during a ride, the user may submit a report describing obstacles or issues, and BBP
automatically retrieves the user's GPS position and associates it with the report.
If the user enables \textbf{automatic mode} when starting the trip, BBP additionally analyzes sensor data (e.g., accelerometer,
gyroscope) to detect irregular movements that may indicate potholes or other issues. Since this process may generate false
positives, each detected anomaly is immediately shown to the user, who may confirm, edit, or reject it. Only validated
anomalies become publishable reports.
Activating automatic mode does not disable manual reporting, both mechanisms remain available throughout the trip.

BBP also supports both manual and automatic creation of new bike paths.
In \textbf{manual mode}, the user draws the desired path directly on the map or selects the map segments composing it.
In \textbf{automatic mode}, the system reconstructs the path by acquiring GPS data while the user cycles along it.
Regardless of the creation method, the new path may remain private or be marked as publishable for the community.

The condition of a bike path can assume several states, such as "optimal," "medium," "sufficient," "requires maintenance," or
"closed." BBP \textbf{aggregates} and \textbf{merges} publishable information about paths obtained from multiple users,
taking into account the \textbf{freshness} of the data and the number of consistent confirmations received. For instance,
if a path receives multiple reports within a similar timeframe, BBP determines its status based on the most supported and recent
information.

Any user can search for and visualize optimal bike paths between two points on a map.
Paths are \textbf{ranked} according to their status and overall effectiveness in connecting the selected origin and destination.

\subsection{World Phenomena}
\label{subsec:world_phenomena}
The phenomena relevant to the system can be grouped into two main categories.
This section focuses on non-shared world phenomena, that is, phenomena occurring in the external environment which are beyond the machine's direct control.

\begin{itemize}
	\item [\textbf{[W1]}] Availability and accuracy of external services used by the system, such as meteorological services and map visualization providers.
	\item [\textbf{[W2]}] The user has a device capable of measuring additional statistics.
	\item [\textbf{[W3]}] The road's physical condition can evolve.
	\item [\textbf{[W4]}] The user may deviate from the suggested path.
	\item [\textbf{[W5]}] The user may experience unexpected events during the ride (e.g., accidents, weather changes).
	\item [\textbf{[W6]}] The user rides a bike.
\end{itemize}

\subsection{World Controlled Shared Phenomena}
\label{subsec:shared_world_phenomena}

\begin{itemize}
	\item [\textbf{[SP1]}] A guest user registers to the system.
	\item [\textbf{[SP2]}] A logged-in user logs into the system.
	\item [\textbf{[SP3]}] A logged-in user logs out of the system.
	\item [\textbf{[SP4]}] A logged-in user creates a new bike path.
	\item [\textbf{[SP5]}] A logged-in user decides to make a created bike path public or private.
	\item [\textbf{[SP6]}] A logged-in user deletes one of their created bike paths.
	\item [\textbf{[SP7]}] A user selects an origin and a destination to explore bike paths.
	\item [\textbf{[SP8]}] A user selects a specific bike path to view its details.
	\item [\textbf{[SP9]}] A logged-in user sends reports about a bike path's condition or obstacles.
	\item [\textbf{[SP10]}] A logged-in user confirms or rejects a bike path's condition report.
	\item [\textbf{[SP11]}] A logged-in user updates personal information.
	\item [\textbf{[SP12]}] A user starts or stops recording a bike trip.
	\item [\textbf{[SP13]}] A logged-in user browses a trip history or views statistics.
	\item [\textbf{[SP14]}] External sensors transmit their data to the system.
	\item [\textbf{[SP15]}] External meteorological services provide weather conditions.
\end{itemize}

\subsection{Machine Controlled Shared Phenomena}
\label{subsec:shared_machine_phenomena}

\begin{itemize}
	\item [\textbf{[SP16]}] The system recommends a bike path based on its ranking.
	\item [\textbf{[SP17]}] The system merges reports about bike path's conditions.
	\item [\textbf{[SP18]}] The system updates bike path rankings based on new feedback.
	\item [\textbf{[SP19]}] The system presents detected information from sensors to the logged-in user for confirmation, generating a new report only if the user validates it.
	\item [\textbf{[SP20]}] The system provides pop-up alerts about significant changes in bike path conditions.
	\item [\textbf{[SP21]}] The system confirms the successful creation or deletion of a bike path to the logged-in user.
	\item [\textbf{[SP22]}] The system publishes or hides a bike path according to the logged-in user's sharing preference.
	\item [\textbf{[SP23]}] The system visualizes on a map the bike path(s) between a specified origin and destination.
	\item [\textbf{[SP24]}] The system reads the GPS positions of a biking user to track their trip.
	\item [\textbf{[SP25]}] The system reads data from the external device's sensors (e.g., accelerometer, gyroscope) to detect obstacles during a bike trip.
	\item [\textbf{[SP26]}] The system retrieves additional data (e.g., weather conditions) from external services when available.
	\item [\textbf{[SP27]}] The system provides general and per-trip statistics to logged-in users.
\end{itemize}

% --------------------------------------------------------------------------
% Definitions, Acronyms, Abbreviations % 
% --------------------------------------------------------------------------

\section{Definitions, Acronyms, Abbreviations}
\label{sec:definitions}

\subsection{Definitions}
\label{subsec:definitions}

\begin{itemize}
	\item \textbf{Path:} A route defined either by data collected from users or by paths manually created within BBP. A Bike Path consists of one or more Path Segments.
	\item \textbf{Path Segment:} A portion of a Path defined between two consecutive waypoints. Each segment may have specific attributes.
	\item \textbf{Path Status:} The overall condition of a Bike Path or Path Segment, as determined by the system's aggregation and merging process. Statuses include: \textit{Optimal}, \textit{Medium}, \textit{Sufficient}, \textit{Requires Maintenance}, and \textit{Closed}.
	\item \textbf{Path Score:} The final ranking value computed by the system, based on the path's aggregated status and effectiveness, used to recommend the best alternatives between an origin and a destination.
	\item \textbf{Trip:} A cycling activity tracked through the BBP application. If the user is logged-in, the trip is stored and becomes part of the user's trip history. Each trip includes temporal, spatial, and contextual data (e.g., duration, distance, speed).
	\item \textbf{Report:} A submission of path information by a logged-in user. A report contains details on path status and obstacles and can be either Manually Entered or Automatically Detected (sensor-detected).
	\item \textbf{Freshness:} A metric used when merging reports; newer reports carry more weight than older ones when determining Path Status.
	\item \textbf{Obstacles:} Elements on a path that negatively impact cycling conditions, such as potholes or flooding, as identified by users or automatic sensors.
	\item \textbf{Manual Creation Mode:} The creation mode in which a logged-in user defines a new path by drawing its geometry on the map or selecting the map segments composing it.
	\item \textbf{Automatic Creation Mode:} The creation mode in which a logged-in user defines a new path by cycling along it, allowing the system to reconstruct the path using GPS data.
	\item \textbf{Manual Report:} The system functionality where the logged-in user manually makes a report, inserting the bike path's condition and obstacle, through the application interface.
	\item \textbf{Automatic Report:} The system functionality where, during an active trip with Automatic Mode enabled, the system analyzes sensor data to detect anomalies (e.g., potholes) and presents them to the user for confirmation before generating a report.
\end{itemize}

\subsection{Acronyms}
\label{subsec:acronyms}

\begin{itemize}
	\item \textbf{API:} Application Programming Interface.
	\item \textbf{BBP:} Best Bike Paths (The name of the software system).
	\item \textbf{DA:} Domain assumption.
	\item \textbf{DD:} Design Document.
	\item \textbf{GPS:} Global Positioning System.
	\item \textbf{RASD:} Requirement Analysis and Specification Document.
	\item \textbf{UI:} User Interface.
	\item \textbf{UML:} Unified Modeling Language.
\end{itemize}

\subsection{Abbreviations}
\label{subsec:abbreviations}

\begin{itemize}
	\item \textbf{[Gn]} The n-th goal of the system.
	\item \textbf{[Wn]} The n-th world phenomena.
	\item \textbf{[SPn]} The n-th shared phenomena.
	\item \textbf{[UCn]} The n-th use case.
	\item \textbf{[Rn]} The n-th functional requirement.
\end{itemize}

% --------------------------------------------------------------------------
% Revision history % 
% --------------------------------------------------------------------------

\section{Revision History}
\label{sec:revhistory}

\begin{itemize}
	\item Version 1.0 (30 November 2025);
	\item Version 2.0 (21 December 2025);
	\item Version 2.1 (07 January 2026 - minor changes in sequence diagrams and process details); 
\end{itemize}

% --------------------------------------------------------------------------
% Document Structure % 
% --------------------------------------------------------------------------

\section{Document Structure}
\label{sec:docstructure}

Mainly the current document is divided into six chapters:
\begin{enumerate}
	\item \textbf{Introduction}:  aims to describe the environment and the demands taken into account for this project. In particular, it focuses on the reasons and goals that will be achieved through its development, as well as the context in which the system will operate.
	\item \textbf{Overall Description}: provides a high-level overview of the system, with a domain model and state/process views that outline the system's behavior without implementation details.
	\item \textbf{Specific Requirements}: details the functional and non-functional requirements necessary for the system to achieve its goals. In addition, it contains external interface requirements (UI, hardware, software, communication) and design constraints.
	\item \textbf{Formal Analysis}: presents a formal description of selected aspects of the world/shared phenomena using the Alloy modeling language.
	\item \textbf{References}: lists all sources (including Software) and documents used in the preparation of this document.
	\item \textbf{Effort Spent}: provides a breakdown of time spent on each section of the document.
\end{enumerate}